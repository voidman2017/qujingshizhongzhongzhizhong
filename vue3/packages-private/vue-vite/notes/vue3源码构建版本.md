Vue 3 提供了多种构建版本，以适应不同的开发场景和模块系统。以下是对各版本的详细说明及其适用场景：

---

### 1. **全局构建版本（UMD）**

- **文件名**：

  - `vue.global.js`（开发环境）
  - `vue.global.prod.js`（生产环境）
- **特点**：

  - 通过 `<script>` 标签直接在浏览器中使用。
  - 包含完整的 **编译器 + 运行时**，可直接编译模板（如 `template: '<div>{{ msg }}</div>'`）。
- **适用场景**：

  - 传统 HTML 项目，无需构建工具（如 Webpack、Vite）。
  - 快速原型开发或简单页面。

---

### 2. **运行时构建版本（Runtime-only）**

- **文件名**：

  - `vue.runtime.global.js`（开发环境）
  - `vue.runtime.global.prod.js`（生产环境）
- **特点**：

  - 仅包含 **运行时**，不包含模板编译器。
  - 必须预先编译模板（如通过单文件组件或构建工具）。
  - 体积更小，性能更优。
- **适用场景**：

  - 使用单文件组件（`.vue` 文件）或已预编译模板的现代项目。
  - 搭配构建工具（Webpack、Vite）以减少最终包体积。

---

### 3. **ES Module 构建版本（用于现代打包工具）**

- **文件名**：

  - **完整版**：`vue.esm-bundler.js`
  - **运行时版**：`vue.runtime.esm-bundler.js`
- **特点**：

  - 通过 `import/export` 语法导入，支持 Tree-shaking。
  - 需要配合构建工具（如 Webpack、Rollup、Vite）使用。
  - 不会硬编码 `process.env.NODE_ENV`，需在构建时配置环境。
- **适用场景**：

  - 使用现代前端工程化的项目（如 Vue CLI、Vite 创建的项目）。
  - 需要 Tree-shaking 优化以减小生产包体积。

---

### 4. **CommonJS 构建版本**

- **文件名**：

  - `vue.cjs.js`（开发环境）
  - `vue.cjs.prod.js`（生产环境）
- **特点**：

  - 用于支持 CommonJS 的打包工具（如旧版 Webpack）。
  - 包含完整功能。
- **适用场景**：

  - 传统的 Node.js 环境或旧版构建流程（逐渐被 ESM 取代）。

---

### 5. **服务端渲染（SSR）版本**

- **文件名**：

  - `vue.server-renderer.js`
  - `vue.cjs.prod.js`（生产环境的 CJS 版本可能用于 SSR）
- **特点**：

  - 专为 Node.js 服务端渲染设计。
  - 生成静态 HTML，优化首屏加载速度。
- **适用场景**：

  - 需要 SEO 优化或首屏性能要求高的场景（如 Nuxt.js 框架）。

---

### 6. **生产环境 vs. 开发环境**

- **开发版本**：

  - 包含完整的警告和错误提示（如 `vue.global.js`）。
  - 用于调试阶段。
- **生产版本**：

  - 移除所有警告，代码经过压缩（如 `vue.global.prod.js`）。
  - 体积更小，执行效率更高。

---

### **使用建议**

1. **现代工程化项目**（如 Vite、Vue CLI）：

   - 选择 **`vue.runtime.esm-bundler.js`**（默认配置）。
   - 配合 `@vue/compiler-sfc` 编译单文件组件，实现最小体积。
2. **直接浏览器中使用**：

   - 需要动态编译模板 → `vue.global.js`。
   - 模板已预编译 → `vue.runtime.global.js`（更高效）。
3. **服务端渲染**：

   - 使用 `vue.server-renderer.js` 并结合构建工具配置。

---

### **关键区别：完整版 vs. 运行时版**

- **完整版**：

  - 包含 **编译器**（将字符串模板编译为渲染函数）。
  - 支持 `template` 选项，但增加约 30% 体积。
- **运行时版**：

  - 需预编译模板（通过 `.vue` 文件或构建工具）。
  - 更小、更快，推荐大多数项目使用。

---

通过合理选择构建版本，可以显著优化项目性能和体积。现代工具链（如 Vite）通常默认选择最优配置。
